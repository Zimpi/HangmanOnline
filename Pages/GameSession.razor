@page "/session/{SessionGuid:guid}"
@inject Manager Manager
@inject ISnackbar Snackbar
@inject NavigationManager NavigationManager
@using System.Runtime.InteropServices
@implements IDisposable


<h3>GameSession</h3>

@code {

    [Parameter]
    public Guid SessionGuid { get; set; }

    public Session? CurrentSession { get; set; }

    protected override void OnInitialized()
    {
        base.OnInitialized();

        var session = Manager.GetSession(SessionGuid);
        if (session == null)
        {
            Snackbar.Add($"Diese Session wurde nicht gefunden oder existiert nicht mehr!", Severity.Error);
            NavigationManager.NavigateTo("/");
            return;
        }

        CurrentSession = session;
        CurrentSession.MessageReceived += MessageReceived;
        CurrentSession.PlayerAdded += PlayerAdded;
        CurrentSession.PlayerRemoved += PlayerRemoved;
    }

    private void PlayerRemoved(string obj)
    {
        throw new NotImplementedException();
    }

    private void PlayerAdded(Player obj)
    {
        throw new NotImplementedException();
    }

    private void MessageReceived(string nachricht, Severity type)
    {
        Snackbar.Add(nachricht, type);
    }

}
